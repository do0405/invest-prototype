<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" class="logo" width="120"/>

# VCP 및 컵앤핸들 패턴의 정량적 탐지 조건

## 개요

변동성 수축 패턴(VCP)과 컵앤핸들 패턴은 마크 미너비니와 윌리엄 오닐의 연구에 따르면 주식 시장에서 가장 신뢰도 높은 매수 신호 중 하나입니다[^1][^2][^3]. VCP 패턴은 60-70%의 성공률을 보이며, 컵앤핸들 패턴은 역사상 가장 큰 주식 상승을 보인 종목들의 99%에서 발견되었습니다[^1][^4].

## VCP (Volatility Contraction Pattern) 정량적 탐지 조건

### 수축 패턴의 핵심 조건

VCP 패턴의 가장 중요한 특징은 점진적으로 줄어드는 변동성입니다[^1][^5]. 알고리즘이 인식해야 할 구체적인 수치 조건은 다음과 같습니다[^6][^7]:

- **수축 횟수**: 최소 3회, 최대 4회의 가격 수축이 발생해야 합니다[^1]
- **수축 깊이 감소**: 각 수축의 깊이가 이전보다 작아야 하며, 구체적 기준은 1차 수축 15-25%, 2차 수축 8-15%, 3차 수축 3-8%, 4차 수축 1-5%입니다[^1][^5]
- **시간 조건**: 전체 패턴 기간은 6-12주(42-84일), 각 수축 기간은 1-3주(5-21일)이어야 합니다[^1]

![VCP 패턴: 점진적으로 줄어드는 변동성과 돌파 패턴](https://pplx-res.cloudinary.com/image/upload/v1750389955/pplx_code_interpreter/26a88650_aceriv.jpg)

VCP 패턴: 점진적으로 줄어드는 변동성과 돌파 패턴

### 거래량 패턴 조건

거래량은 VCP 패턴 확인에 있어 결정적 요소입니다[^1][^5]. 수치적 조건은:

- **수축 중 거래량 감소**: 각 수축마다 이전 대비 20-50% 거래량 감소[^1]
- **최종 수축 거래량**: 20일 평균 거래량의 70% 이하로 떨어져야 합니다[^1]
- **돌파 시 거래량 급증**: 20일 평균 거래량의 150% 이상으로 증가해야 합니다[^1][^8]


### 피벗 포인트 조건

피벗 포인트는 VCP 패턴의 매수 신호 발생 지점입니다[^5][^9]. 정량적 조건:

- **저항선 근접도**: 주가가 이전 고점의 95-100% 수준에 위치[^5]
- **최대 하락폭**: 고점 대비 최대 8% 이내 하락[^1][^5]
- **횡보 기간**: 5-15거래일 동안 좁은 범위에서 거래[^1]


## 컵앤핸들 패턴 정량적 탐지 조건

### 컵(Cup) 형성 조건

컵앤핸들 패턴은 윌리엄 오닐이 1988년 저서에서 처음 체계화한 패턴으로, 구체적인 측정 기준이 있습니다[^2][^4][^3].

**모양 조건**:

- **U자형 바닥**: V자형 급락은 부적격이며, 완만한 곡선이어야 합니다[^2][^4]
- **좌우 대칭성**: 좌측 고점과 우측 고점의 가격 차이가 5% 이내[^4][^3]
- **바닥 곡률**: 최저점에서 최소 10일 이상 횡보 또는 완만한 회복[^4]

**깊이 조건**:

- **표준 깊이**: 이전 상승폭의 12-35%[^2][^4]
- **최대 허용 깊이**: 극한 상황에서 50%까지 허용[^4][^3]
- **이상적 깊이**: 20-30% 범위가 가장 바람직합니다[^4]


### 핸들(Handle) 형성 조건

핸들은 컵 형성 후 마지막 조정 구간으로, 엄격한 기준이 적용됩니다[^2][^3][^10].

**크기 조건**:

- **핸들 깊이**: 컵 우측 고점 대비 최대 1/3(33%) 이내[^2][^4][^3]
- **이상적 깊이**: 10-20% 범위[^4][^10]
- **최소 깊이**: 3% 이상의 조정은 있어야 합니다[^4]

**시간 조건**:

- **핸들 기간**: 최소 1주, 최대 4주(7-28일)[^2][^4]
- **전체 패턴 기간**: 최소 7주 이상 소요되어야 합니다[^2][^3]

![컵앤핸들 패턴: U자형 컵과 작은 핸들을 통한 상승 지속 패턴](https://pplx-res.cloudinary.com/image/upload/v1750390010/pplx_code_interpreter/feda7288_qbet5q.jpg)

컵앤핸들 패턴: U자형 컵과 작은 핸들을 통한 상승 지속 패턴

### 거래량 검증 조건

컵앤핸들 패턴의 거래량 패턴은 신뢰도를 결정하는 핵심 요소입니다[^4][^3][^10]:

- **컵 형성 중**: 거래량이 점진적으로 감소[^4][^3]
- **바닥 구간**: 평균 거래량의 50% 이하로 감소[^4]
- **핸들 구간**: 더욱 감소된 거래량 유지[^4][^10]
- **돌파 시점**: 평균 거래량의 150% 이상 급증[^2][^4][^3]


## 알고리즘 구현을 위한 수치 기준

### VCP 탐지 알고리즘 로직

실제 구현에서는 다음과 같은 단계별 검증이 필요합니다[^6][^7]:

1. **기간별 고점 탐지**: 6-12주 구간에서 3-4개의 고점 식별
2. **수축률 계산**: 각 고점 간 하락폭을 백분율로 계산하여 감소 패턴 확인
3. **거래량 추이 분석**: 20일 이동평균 거래량 대비 각 구간별 거래량 비율 계산
4. **피벗 근접도 측정**: 현재가와 저항선 간 거리를 백분율로 계산

### 컵앤핸들 탐지 알고리즘 로직

컵앤핸들 패턴 탐지를 위한 구체적 수치 검증 과정입니다[^4][^3]:

1. **컵 모양 검증**: 최고점-최저점-최고점의 곡선 형태를 2차 함수로 근사하여 U자형 확인
2. **대칭성 측정**: 좌우 고점의 높이 차이를 5% 기준으로 검증
3. **깊이 비율 계산**: (최고점-최저점)/최고점 비율이 12-35% 범위 확인
4. **핸들 비율 검증**: 핸들 깊이가 컵 우측 고점 대비 33% 이내 확인

## 신뢰도 최적화 방안

### False Positive 최소화 전략

패턴 탐지의 정확도를 높이기 위한 조건 강화 방안입니다[^1][^6]:

- **다중 조건 AND 연산**: 모든 수치 조건을 동시에 만족해야만 신호 발생
- **거래량 검증 강화**: 돌파 시 거래량이 평균의 200% 이상일 때만 유효 신호로 인정
- **시간 필터 적용**: 최소 형성 기간을 엄격히 준수하여 미완성 패턴 배제


### False Negative 최소화 방안

실제 유효한 패턴을 놓치지 않기 위한 허용 범위 설정입니다[^6][^7]:

- **조건별 허용 오차**: 각 수치 조건에 5-10%의 허용 범위 적용
- **다중 시간프레임 검증**: 일봉과 주봉에서 동시 확인으로 신뢰도 향상
- **부분 만족 시 가중치**: 핵심 조건 80% 이상 만족 시 후보군으로 분류

