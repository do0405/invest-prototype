# 학술 논문 기반 VCP 및 컵앤핸들 패턴 구현 방식 상세 분석

다음은 주요 학술 논문들이 **Volatility Contraction Pattern**(VCP) 및 **Cup & Handle** 패턴을 자동으로 인식·구현한 방식을 구체적으로 정리한 내용입니다.

---

## 1. VCP(Volatility Contraction Pattern) 구현 방식

### 1.1 비모수 커널 회귀를 이용한 가격 곡선 스무딩  
- **논문**: Lo, Mamaysky & Wang (2000)  
- **방법**: 가격 시계열 $$P_t$$를 비모수 커널 회귀(kernel regression)로 스무딩하여 노이즈 제거 후, 스무딩된 곡선의 국소 최대·최소점을 수치적으로 추출[1].  
- **핵심 절차**:  
  1. 커널 밀도 함수 $$K_h(u)=\frac{1}{h\sqrt{2\pi}}e^{-u^2/(2h^2)}$$로 가중치 계산[1].  
  2. 스무딩 추정치 $$\hat m_h(x)=\frac{\sum K_h(x-X_t)P_t}{\sum K_h(x-X_t)}$$ 산출[1].  
  3. 최적 대역폭 $$h$$는 교차검증법(CV)으로 결정하되, 실무적으론 CV 최적값의 30% 수준으로 조정하여 과도한 평탄화 방지[1].  

### 1.2 연속적 변동성 수축 검출  
- **논문**: Suh, Li & Gao (2008)  
- **방법**: 스무딩된 곡선의 연속 피크 간 진폭(amplitude)을 비교하여 “진폭 감소”만으로 VCP로 인식하도록 간소화[2].  
- **절차 요약**:  
  1. 스무딩 곡선에서 연속 피크(peak)·골 trough 추출.  
  2. 각 피크 사이 진폭이 이전보다 작으면 수축으로 판단.  
  3. 최소 2회 이상 연속 수축 시 패턴으로 식별.  

---

## 2. 컵앤핸들(Cup & Handle) 구현 방식

### 2.1 2차 다항식 근사를 이용한 U자형 컵 검증  
- **논문**: Suh, Li & Gao (2008)  
- **방법**: 컵 구간(고점–저점–고점)을 2차 다항식으로 근사(fit)하여 U자 형태 여부 판별[2].  
- **절차**:  
  1. 스무딩 시계열에서 컵 구간의 세 점 피팅: $$(t_1, P_{t_1}),(t_2,P_{t_2}),(t_3,P_{t_3})$$.  
  2. 2차 함수 $$f(t)=at^2+bt+c$$로 최적 근사.  
  3. 곡률(curvature) 및 대칭성 검토: 좌우 고점 간 높이 차이, 저점 위치 확인.  

### 2.2 베지어 곡선과 상관계수 비교  
- **논문**: Suh, Li & Gao (2008)  
- **방법**:  
  1. 스무딩 데이터에서 7개 제어점(pair of tops, bottom, midpoints) 선정.  
  2. 이 점들로 베지어 곡선 생성.  
  3. 베지어 곡선과 원본 스무딩 시계열의 피어슨 상관계수 $$\rho\ge0.85$$일 때 패턴 인식[2].  

### 2.3 핸들(handle) 소폭 조정 검출  
- **논문**: Suh, Li & Gao (2008)  
- **방법**: 컵 우측 고점 이후 조정 구간의 하락폭이 컵 깊이의 33% 이내일 때 핸들로 인식[2].  

---

## 3. 구현 간소화 전략: “감소·형상” 기반 검출

- **단순화**: 구체적 수치 대신,  
  - VCP는 “각 피크 간 진폭이 이전보다 작기만 하면”  
  - 컵앤핸들은 “U자형 저점 형성 + 작은 조정”만으로 감지  
- **장점**:  
  - 수치 기준 완화로 위음성(false negative) 감소  
  - 추가 기법 없이 순수 가격 형상만으로 탐지 가능[2].  